{"version":3,"file":"bundle.js","sources":["../src/lib/videos.js","../src/lib/utils.js","../src/index.js"],"sourcesContent":["/**\r\n * Sækja gögn frá\r\n * https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php\r\n *\r\n * sér í lagi, alla jarðskjálfta 4,5+ seinustu 7 daga:\r\n * https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson\r\n *\r\n * Ath, í verkefni er afrit af gögnum í `./4.5_week.geojson`, gott\r\n * að nota það á meðan þróun stendur en skipta svo út.\r\n */\r\n\r\n//const URL = 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson';\r\nconst URL = './videos.json';\r\n\r\nexport async function fetchVideos() {\r\n  // Sækja gögn frá URL, setja upp villumeðhöndlun og skila\r\n  let result;\r\n\r\n  try {\r\n    result = await fetch(URL);\r\n  } catch (e) {\r\n    console.error('Villa við að sækja', e);\r\n    return null;\r\n  }\r\n\r\n  if (!result.ok) {\r\n    console.error('Ekki 200 svar', await result.text());\r\n    return null;\r\n  }\r\n\r\n  const data = await result.json();\r\n\r\n  return data;\r\n}\r\n","import { format } from \"date-fns\";\r\n\r\n/**\r\n * Create an element with attributes and events, and append elements or\r\n * strings to it.\r\n *\r\n * Usage:\r\n *  const el = element(\r\n *    'button',\r\n *    { 'class': 'button' },\r\n *    { click: () => { ... } },\r\n *    'Takki'\r\n *   );\r\n *  returns\r\n *  <button class=\"button\">Takki</button> with a click handler.\r\n *\r\n * @param {string} name Element name\r\n * @param {object} attributes Object containing attributes to attach to element.\r\n * @param {object} events Object of events to add to element.\r\n * @param  {...any} children List of elements or strings to append to element.\r\n * @returns {object} HTML element.\r\n */\r\nexport function element(name, attributes = null, events = null,...children) {\r\n  const el = document.createElement(name);\r\n\r\n  for (const child of children) {\r\n    if (!child) {\r\n      continue;\r\n    }\r\n\r\n    if (attributes) {\r\n      for (const attrib in attributes) {\r\n        console.log('attrib :>> ', attrib);\r\n        el.setAttribute(attrib, attributes[attrib]);\r\n      }\r\n    }\r\n\r\n    if (events) {\r\n      for (const event in events) {\r\n        el.addEventListener(event, events[event]);\r\n      }\r\n    }\r\n\r\n    if (typeof child === 'string') {\r\n      el.appendChild(document.createTextNode(child));\r\n    } else {\r\n      el.appendChild(child);\r\n    }\r\n  }\r\n\r\n  return el;\r\n}\r\n\r\n/**\r\n * Simplified element function.\r\n * Creates an element and append elements or strings to it.\r\n *\r\n * @param {string} name Element name\r\n * @param  {...any} children List of elements or strings to append to element.\r\n * @returns {object} HTML element.\r\n */\r\nexport function el(name, ...children) {\r\n  return element(name, null, null, ...children);\r\n}\r\n\r\n/**\r\n * Format a timestamp as dd.mm.yyyy hh:mm:ss e.g. \"01.11.2020 12:00:00\".\r\n *\r\n * @param {number} timestamp Unix timestamp to format\r\n * @returns {string} Formatted string.\r\n */\r\nexport function formatDate(timestamp) {\r\n  // Útfæra með „vanilla JS“ eða nota date-fns pakka\r\n  return format(new Date(timestamp), 'dd.MM.yyyy HH:mm:ss');\r\n}\r\n","import { fetchVideos } from './lib/videos';\r\nimport { el, element, formatDate } from './lib/utils';\r\n//import { init, createPopup } from './lib/map';\r\n\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n  // Hér er allt „vírað“ saman\r\n\r\n  const videos = await fetchVideos();\r\n\r\n  // Fjarlægjum loading skilaboð eftir að við höfum sótt gögn\r\n  const loading = document.querySelector('.loading');\r\n  const parent = loading.parentNode;\r\n  parent.removeChild(loading);\r\n\r\n  if (!videos) {\r\n    parent.appendChild(\r\n      el('p', 'Villa við að sækja gögn')\r\n    );\r\n  }\r\n\r\n  const ul = document.querySelector('.earthquakes');\r\n  const map = document.querySelector('.map');\r\n\r\n  init(map);\r\n\r\n  earthquakes.forEach((quake) => {\r\n\r\n    const { title, mag, time, url } = quake.properties;\r\n\r\n    const link = element('a', { href: url, target: '_blank' }, null, 'Skoða nánar');\r\n\r\n    const markerContent =\r\n      el('div',\r\n        el('h3', title),\r\n        el('p', formatDate(time)),\r\n        el('p', link)\r\n      );\r\n    const marker = createPopup(quake.geometry, markerContent.outerHTML);\r\n\r\n    const onClick = () => {\r\n      marker.openPopup()\r\n    };\r\n\r\n    const li = el('li');\r\n\r\n    li.appendChild(\r\n      el('div',\r\n        el('h2', title),\r\n        el('dl',\r\n          el('dt', 'Tími'),\r\n          el('dd', formatDate(time)),\r\n          el('dt', 'Styrkur'),\r\n          el('dd', `${mag} á richter`),\r\n          el('dt', 'Nánar'),\r\n          el('dd', url.toString()),\r\n        ),\r\n        element('div', { 'class': 'buttons' }, null,\r\n          element('button', null, { 'click': onClick }, 'Sjá á korti'),\r\n          link,\r\n        ),\r\n      ),\r\n    );\r\n\r\n    ul.appendChild(li);\r\n  });\r\n});\r\n\r\n"],"names":["URL","fetchVideos","fetch","result","console","error","ok","text","json","data","element","name","attributes","events","el","document","createElement","children","child","attrib","log","setAttribute","event","addEventListener","appendChild","createTextNode","formatDate","timestamp","format","Date","videos","loading","querySelector","parent","parentNode","removeChild","ul","map","init","earthquakes","forEach","quake","properties","title","mag","time","url","link","href","target","markerContent","marker","createPopup","geometry","outerHTML","onClick","openPopup","li","toString"],"mappings":"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"}