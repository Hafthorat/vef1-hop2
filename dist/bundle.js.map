{"version":3,"file":"bundle.js","sources":["../src/lib/videos.js","../src/lib/utils.js","../src/index.js"],"sourcesContent":["/**\n * Sækja gögn frá\n * https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php\n *\n * sér í lagi, alla jarðskjálfta 4,5+ seinustu 7 daga:\n * https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson\n *\n * Ath, í verkefni er afrit af gögnum í `./4.5_week.geojson`, gott\n * að nota það á meðan þróun stendur en skipta svo út.\n */\n\n//const URL = 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson';\nconst URL = './videos.json';\n\nexport async function fetchVideos() {\n  // Sækja gögn frá URL, setja upp villumeðhöndlun og skila\n  let result;\n\n  try {\n    result = await fetch(URL);\n  } catch (e) {\n    console.error('Villa við að sækja', e);\n    return null;\n  }\n\n  if (!result.ok) {\n    console.error('Ekki 200 svar', await result.text());\n    return null;\n  }\n\n  const data = await result.json();\n\n  return data;\n}\n","import { format } from \"date-fns\";\n\n/**\n * Create an element with attributes and events, and append elements or\n * strings to it.\n *\n * Usage:\n *  const el = element(\n *    'button',\n *    { 'class': 'button' },\n *    { click: () => { ... } },\n *    'Takki'\n *   );\n *  returns\n *  <button class=\"button\">Takki</button> with a click handler.\n *\n * @param {string} name Element name\n * @param {object} attributes Object containing attributes to attach to element.\n * @param {object} events Object of events to add to element.\n * @param  {...any} children List of elements or strings to append to element.\n * @returns {object} HTML element.\n */\nexport function element(name, attributes = null, events = null,...children) {\n  const el = document.createElement(name);\n\n  for (const child of children) {\n    if (!child) {\n      continue;\n    }\n\n    if (attributes) {\n      for (const attrib in attributes) {\n        console.log('attrib :>> ', attrib);\n        el.setAttribute(attrib, attributes[attrib]);\n      }\n    }\n\n    if (events) {\n      for (const event in events) {\n        el.addEventListener(event, events[event]);\n      }\n    }\n\n    if (typeof child === 'string') {\n      el.appendChild(document.createTextNode(child));\n    } else {\n      el.appendChild(child);\n    }\n  }\n\n  return el;\n}\n\n/**\n * Simplified element function.\n * Creates an element and append elements or strings to it.\n *\n * @param {string} name Element name\n * @param  {...any} children List of elements or strings to append to element.\n * @returns {object} HTML element.\n */\nexport function el(name, ...children) {\n  return element(name, null, null, ...children);\n}\n\n/**\n * Format a timestamp as dd.mm.yyyy hh:mm:ss e.g. \"01.11.2020 12:00:00\".\n *\n * @param {number} timestamp Unix timestamp to format\n * @returns {string} Formatted string.\n */\nexport function formatDate(timestamp) {\n  // Útfæra með „vanilla JS“ eða nota date-fns pakka\n  return format(new Date(timestamp), 'dd.MM.yyyy HH:mm:ss');\n}\n","import { fetchVideos } from './lib/videos';\nimport { el, element, formatDate } from './lib/utils';\n//import { init, createPopup } from './lib/map';\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  // Hér er allt „vírað“ saman\n\n  const videos = await fetchVideos();\n\n  // Fjarlægjum loading skilaboð eftir að við höfum sótt gögn\n  const loading = document.querySelector('.loading');\n  const parent = loading.parentNode;\n  parent.removeChild(loading);\n\n  if (!videos) {\n    parent.appendChild(\n      el('p', 'Villa við að sækja gögn')\n    );\n  }\n\n  const ul = document.querySelector('.earthquakes');\n  const map = document.querySelector('.map');\n\n  init(map);\n\n  earthquakes.forEach((quake) => {\n\n    const { title, mag, time, url } = quake.properties;\n\n    const link = element('a', { href: url, target: '_blank' }, null, 'Skoða nánar');\n\n    const markerContent =\n      el('div',\n        el('h3', title),\n        el('p', formatDate(time)),\n        el('p', link)\n      );\n    const marker = createPopup(quake.geometry, markerContent.outerHTML);\n\n    const onClick = () => {\n      marker.openPopup()\n    };\n\n    const li = el('li');\n\n    li.appendChild(\n      el('div',\n        el('h2', title),\n        el('dl',\n          el('dt', 'Tími'),\n          el('dd', formatDate(time)),\n          el('dt', 'Styrkur'),\n          el('dd', `${mag} á richter`),\n          el('dt', 'Nánar'),\n          el('dd', url.toString()),\n        ),\n        element('div', { 'class': 'buttons' }, null,\n          element('button', null, { 'click': onClick }, 'Sjá á korti'),\n          link,\n        ),\n      ),\n    );\n\n    ul.appendChild(li);\n  });\n});\n\n"],"names":["URL","fetchVideos","fetch","result","console","error","ok","text","json","data","element","name","attributes","events","el","document","createElement","children","child","attrib","log","setAttribute","event","addEventListener","appendChild","createTextNode","formatDate","timestamp","format","Date","videos","loading","querySelector","parent","parentNode","removeChild","ul","map","init","earthquakes","forEach","quake","properties","title","mag","time","url","link","href","target","markerContent","marker","createPopup","geometry","outerHTML","onClick","openPopup","li","toString"],"mappings":"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"}